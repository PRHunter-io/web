import { BountyListView } from "./bounty-list-view";
import { useUserBounties } from "@/lib/swr";
import { Spinner } from "react-bootstrap";

const BountyTable = () => {

    const { bounties, isLoading, isError } = useUserBounties()

    if (isLoading) return (
        <BountyTableInner content={
            <div className="row align-items-center justify-content-center">
                <Spinner animation="border" role="status">
                    <h5 className="visually-hidden">Loading...</h5>
                </Spinner>
            </div>

        } />
    )

    if (isError) return (
        <BountyTableInner content={
            <div>
                Error
            </div>
        } />
    )

    return (
        <BountyTableInner children={bounties.map(bounty => <BountyListView key={bounty.id} bounty={bounty} />)} />
    )
}

const BountyTableInner = props => {
    return (
        <div className="mb-14">
            <div className="row mb-11 align-items-center">
                <div className="col-lg-6 mb-lg-0 mb-4">
                    <h3 className="font-size-6 mb-0">Posted bounties (12)</h3>
                </div>
            </div>
            <div className="bg-white shadow-8 pt-7 rounded pb-8 px-11">
                <div className="table-responsive">
                    <table className="table table-striped">
                        <thead>
                            <tr>
                                <th
                                    scope="col"
                                    className="pl-0  border-0 font-size-4 font-weight-normal"
                                >
                                    Title
                                </th>
                                <th
                                    scope="col"
                                    className="border-0 font-size-4 font-weight-normal"
                                >
                                    Bounty Value
                                </th>
                                <th
                                    scope="col"
                                    className="border-0 font-size-4 font-weight-normal"
                                >
                                    Created at
                                </th>
                                <th
                                    scope="col"
                                    className="border-0 font-size-4 font-weight-normal"
                                ></th>
                            </tr>
                        </thead>
                        <tbody>
                            {props.children}
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    )
}

export default BountyTable;